<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>暗恋测试</title>

<style>
body{
 margin:0;
 font-family:"微软雅黑";
 background:linear-gradient(180deg,#ffeaf1,#ffd4e2,#ffeaf1);
 min-height:100vh;
 color:#333;
}

@keyframes fadeUp{
 from{opacity:0;transform:translateY(20px);}
 to{opacity:1;transform:translateY(0);}
}

.page{display:none;padding:20px;}
.active{display:block;animation:fadeUp .5s ease;}

h1{
 text-align:center;
 color:#ff3b6a;
 margin-top:30px;
 font-size:28px;
 font-weight:700;
}

button{
 width:90%;
 margin:20px auto;
 padding:14px;
 border:none;
 border-radius:14px;
 background:#ff3b6a;
 color:#fff;
 font-size:18px;
 display:block;
 box-shadow:0 4px 10px rgba(255,59,106,.3);
}

.card{
 background:#fff;
 padding:22px;
 border-radius:18px;
 box-shadow:0 6px 15px rgba(0,0,0,.12);
 margin-top:30px;
}

.option{
 padding:14px;
 background:#ffd9e4;
 border-radius:13px;
 margin-top:12px;
 font-size:17px;
}
.option:active{transform:scale(.96);}

.progress{
 width:90%;
 height:12px;
 background:#fff;
 border-radius:10px;
 margin:20px auto;
 overflow:hidden;
}
.progress-inner{
 height:100%;
 width:0%;
 background:#ff3b6a;
 transition:.3s;
}

#poster{
 background:#ffe3ed;
 padding:20px;
 border-radius:20px;
 box-shadow:0 0 25px rgba(255,80,120,.25);
}
</style>
</head>

<body>

<!-- 封面 -->
<div id="page-start" class="page active">
 <h1>暗恋测试</h1>
 <div class="card">
  <p style="text-align:center;color:#666;">小红书风 · 暗恋概率测算</p >
  <input id="username" placeholder="输入你的名字"
   style="width:90%;padding:12px;border-radius:10px;border:1px solid #ddd;display:block;margin:15px auto;">
  <button onclick="startTest()">开始测试</button>
 </div>
</div>

<!-- 测试 -->
<div id="page-test" class="page">
 <div class="progress"><div class="progress-inner" id="bar"></div></div>
 <div id="question-box" class="card"></div>
</div>

<!-- 结果 -->
<div id="page-result" class="page">
 <h1>测试结果</h1>
 <div id="result-box" class="card"></div>
 <button onclick="makePoster()">生成海报</button>
 <button onclick="restart()">再测一次</button>
</div>

<!-- 海报 -->
<div id="page-poster" class="page">
 <h1>分享海报</h1>
 <div id="poster"></div>
 <button onclick="restart()">再测一次</button>
</div>

<script>
const questions=[
 {q:"TA 看你时会刻意避开又忍不住看吗？",s:[3,2,1]},
 {q:"TA 会主动找你聊天吗？",s:[3,2,1]},
 {q:"你发动态时，TA 基本都会出现吗？",s:[3,2,1]},
 {q:"TA 会注意你的小变化吗？",s:[3,2,1]},
 {q:"和你单独相处时，TA 会紧张吗？",s:[3,2,1]},
 {q:"TA 记得你的喜好吗？",s:[3,2,1]},
 {q:"你不开心时，TA 会关心吗？",s:[3,2,1]},
 {q:"TA 会偷偷观察你吗？",s:[3,2,1]},
 {q:"TA 会向别人提起你吗？",s:[3,2,1]},
 {q:"你直觉觉得 TA 喜欢你吗？",s:[3,2,1]}
];

let index=0,score=0,nameUser="";

function startTest(){
 nameUser=document.getElementById("username").value||"你";
 document.getElementById("page-start").classList.remove("active");
 document.getElementById("page-test").classList.add("active");
 loadQ();
}

function loadQ(){
 let q=questions[index];
 document.getElementById("question-box").innerHTML=`
  <h2 style="color:#ff3b6a;line-height:1.4;">${q.q}</h2>
  <div class="option" onclick="choose(0)">非常明显</div>
  <div class="option" onclick="choose(1)">有一点</div>
  <div class="option" onclick="choose(2)">看不出来</div>
 `;
 document.getElementById("bar").style.width=
  (index/questions.length)*100+"%";
}

function choose(n){
 score+=questions[index].s[n];
 index++;
 index>=questions.length ? showResult() : loadQ();
}

function getResult(){
 let percent=Math.round(score/30*100);
 if(percent>95) percent=95;
 if(percent<10) percent=10;

 let text="";
 if(percent>=80) text="几乎可以确定，TA 对你是藏不住的在意。";
 else if(percent>=60) text="暗恋信号明显，关系正在升温。";
 else if(percent>=40) text="有好感，但还在犹豫和观察。";
 else text="目前暗恋迹象较弱，更像普通关系。";

 return {percent,text};
}

function showResult(){
 document.getElementById("page-test").classList.remove("active");
 document.getElementById("page-result").classList.add("active");
 let r=getResult();

 document.getElementById("result-box").innerHTML=`
  <p style="font-size:46px;font-weight:900;color:#ff3b6a;">
   ${r.percent}%
  </p >
  <p style="color:#999;margin-bottom:14px;">
   TA 暗恋你的概率
  </p >
  <p style="font-size:17px;color:#555;line-height:1.6;">
   ${nameUser}，${r.text}
  </p >
 `;
}

function makePoster(){
 let r=getResult();
 document.getElementById("page-result").classList.remove("active");
 document.getElementById("page-poster").classList.add("active");

 document.getElementById("poster").innerHTML=`
 <div style="background:#fff;padding:20px;border-radius:18px;">
  <h2 style="color:#ff3b6a;">暗恋测试报告</h2>
  <p>昵称：<b>${nameUser}</b></p >
  <p style="font-size:50px;font-weight:900;color:#ff3b6a;">
   ${r.percent}%
  </p >
  <p style="color:#999;">暗恋你的概率</p >
  <p style="margin-top:10px;">${r.text}</p >
 </div>
 <p style="text-align:center;color:#ff3b6a;margin-top:12px;">
  · 长按保存 ·
 </p >
 `;
}

function restart(){
 index=0;score=0;
 document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
 document.getElementById("page-start").classList.add("active");
}
</script>

</body>
</html>
